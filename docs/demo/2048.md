<script setup>
import { ref } from 'vue'

function add() {
  let not0
  while (1) {
    let a = Math.floor(Math.random() * 16)
    if (arr.value[a] == 0) {
      not0 = a
      break
    }
  }
  arr.value[not0] = Math.random() < 0.7 ? 2 : 4
}
function re(){
  location.reload()
}
function play(i){
  let cp = arr.value
  let a = []
  let b = []
  let c
  for(let j =0;j<4;j++) a[j] = [cp[j],cp[j+4],cp[j+8],cp[j+12]]
  for(let j =0;j<4;j++) b[j] = [cp[4*j],cp[4*j+1],cp[4*j+2],cp[4*j+3]]
  switch (i){
    case 1: c=a.map(it=>run(it)) //上
    case 2: c=a.map(it=>run(it.reverse()).map(it=>it.reverse()) //下
    case 3: c=b.map(it=>run(it))
  }
}
function run(a){
  for(let i = 0;i<4;i++){
    if(!a[i] || a[i]==a[i+1]){
      a[i]=a[i]+(a[i+1] ?? 0)
      for(let j = i+1;j<4;j++){
        a[j] = a[j+1] ?? 0
      }
    }
  }
  return a
}

let arr = ref([])
let a1 = Array(16).fill(0)
arr.value = a1
add()
add()
</script>

# 2048

---

<div class="flexbox">
  <div class="grid">
    <div v-for="i in a1" class="items">{{ i ? i:'' }}</div>
  </div>

  <div class="tb">
    <div class="tr">
      <div class="td"></div>
      <button class="td">{{'向上\u{2B06}'}}</button>
      <div class="td"></div>
    </div>
    <div class="tr">
      <button class="td">{{'\u{2B05}向左'}}</button>
      <div class="td">
        <button id="re" @click="re">😊</button>
      </div>
      <button class="td">{{'向右\u{27A1}'}}</button>
    </div>
    <div class="tr">
      <div class="td"></div>
      <button class="td">{{'向下\u{2B07}'}}</button>
      <div class="td"></div>
    </div>
  </div>

</div>

<style>
.flexbox {
  display: flex;
  justify-content: space-evenly;
}
.grid {
  display: grid;
  width: min-content;
  grid-template: repeat(4, 50px) / repeat(4, 50px);
  text-align: center;
  gap: 3px;
}
.items {
  color: var(--c-bg);
  background-color: var(--c-brand);
  font: bold 25px/2 arial;
  border-radius: 10%;
}
.tb{
  display: table;
  height: min-content;
  margin-top: 30px;
}
.tr{
  display: table-row;
}
.td  {
  display: table-cell;
  width: 60px;
  height: 50px;
}
#re {
  display: block;
  background-color: var(--c-bg);
  width: 40px;
  height: 42px;
  border: none;
  margin-left: 10px;
  font-size: 20px;
}
</style>
